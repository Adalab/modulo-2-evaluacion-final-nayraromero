"use strict";const btn=document.querySelector(".btn-search"),input=document.querySelector(".js-input"),characterListEl=document.querySelector(".js-list"),favoritesListEl=document.querySelector(".js-list-favorites");let allCharacters=[],favoriteCharacters=[];function renderOneCharacter(e){let r="",a="";return-1===favoriteCharacters.findIndex(r=>r.char_id===parseInt(e.char_id))?(r="",a="hidden"):(r="selected",a=""),`<li>\n  <article class="article ${r}" id="${e.char_id}">\n  <i class="fa-solid fa-circle-xmark icon ${a}"></i>\n    <img\n      src=${e.img} class="characterPhoto">\n    <h3 class="characterName">${e.name}</h3>\n    <p class="characterStatus">${e.status}</p>\n  </article>\n  </li>`}function renderAllCharacters(e){let r="";for(let a=0;a<e.length;a++)r+=renderOneCharacter(e[a]);characterListEl.innerHTML=r;const a=document.querySelectorAll(".article");for(const e of a)e.addEventListener("click",handleClick)}function renderFavoritesCharacters(){let e="";for(let r=0;r<favoriteCharacters.length;r++)e+=renderOneCharacter(favoriteCharacters[r]);favoritesListEl.innerHTML=e}function handleClick(e){e.currentTarget.classList.toggle("selected"),e.currentTarget.classList.toggle("hidden");const r=allCharacters.find(r=>r.char_id===parseInt(e.currentTarget.id)),a=favoriteCharacters.findIndex(r=>r.char_id===parseInt(e.currentTarget.id));-1===a?(favoriteCharacters.push(r),localStorage.setItem("favCharacter",JSON.stringify(favoriteCharacters))):(favoriteCharacters.splice(a,1),localStorage.setItem("favCharacter",JSON.stringify(favoriteCharacters))),renderFavoritesCharacters()}btn.addEventListener("click",e=>{e.preventDefault();const r=input.value.toLowerCase();renderAllCharacters(allCharacters.filter(e=>e.name.toLowerCase().includes(r)))}),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{allCharacters=e,renderAllCharacters(allCharacters),renderFavoritesCharacters()});const savedFavorites=JSON.parse(localStorage.getItem("favCharacter"));null!==savedFavorites&&(favoriteCharacters=savedFavorites,renderFavoritesCharacters());